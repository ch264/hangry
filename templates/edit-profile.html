{% extends "layout.html" %}
<!-- Imports macro template for form rendering -->
{% from "macros.html" import field_error %}
{% from "macros.html" import field_upload %}

{% block content %}
  <h2 class="subtitle is-2">Edit Profile</h2>
  <form method="POST" action="">
    {{ form.hidden_tag() }}
    <div class="form-input">
      {{ field_error(form.username) }}

      {{ form.username.label(class="label") }}
      {{ form.username(class="control", value=user.username) }}
    </div>

    <div class="form-input">
      {{ field_error(form.email) }}

      {{ form.email.label(class="label") }}
      {{ form.email(class="control", value=user.email) }}
    </div>


    <div class="form-input">
      {{ field_error(form.location) }}

      {{ form.location.label(class="label") }}
      {{ form.location(class="control", value=user.location) }}
    </div>

    <div>
      <form method="POST" action="" class="field" enctype="multipart/form-data">
      {{ form.hidden_tag() }}
      {{ form.file(class="control") }}
    </div>

    <!-- debug form field for uploading picture later. the picture is not saving -->
    <!-- <div class="form-input">
        {{ field_error(form.file) }}
        {{ form.file.label(class="label") }}
        {{ form.file(class="control") }} 
    </div> -->

    {% with messages = get_flashed_messages(with_categories=True) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class={{category}}>{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <hr>

    <button type="submit" class="button is-primary">Save my changes</button>
  </form>
{% endblock %}